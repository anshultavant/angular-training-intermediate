<div class='panel panel-primary'>
    <div class='panel-heading'>
        Sign Up!
    </div>
    <div class='panel-body'>
        <form class='form-horizontal' novalidate
            (ngSubmit)="save()" [formGroup]='customerForm'>
            <fieldset>
                <div class="form-group" 
                    [ngClass]="{'has-error': (customerForm.get('firstName').touched || customerForm.get('firstName').dirty) && !customerForm.get('firstName').valid}">
                    <label class='col-md-2 control-label'>First Name</label>
                    <div class='col-md-8'>
                        <input class="form-control" formControlName="firstName" type="text">
                        <span class="help-block" *ngIf="(customerForm.get('firstName').touched || customerForm.get('firstName').dirty) && customerForm.get('firstName').errors">
                            <span *ngIf="customerForm.get('firstName').errors.required">
                                Please enter your first name.
                            </span>
                            <span *ngIf="customerForm.get('firstName').errors.minlength">
                                The first name must be longer than 3 characters.
                            </span>
                        </span>
                    </div>
                </div>
                <div class="form-group" 
                    [ngClass]="{'has-error': (customerForm.get('lastName').touched || customerForm.get('lastName').dirty) && !customerForm.get('lastName').valid}">
                    <label class='col-md-2 control-label'>Last Name</label>
                    <div class='col-md-8'>
                        <input class="form-control" formControlName="lastName" type="text">
                        <span class="help-block" *ngIf="(customerForm.get('lastName').touched || customerForm.get('lastName').dirty) && customerForm.get('lastName').errors">
                            <span *ngIf="customerForm.get('lastName').errors.required">
                                Please enter your last name.
                            </span>
                            <span *ngIf="customerForm.get('lastName').errors.minlength || customerForm.get('lastName').errors.maxlength">
                                The last name must be longer than 3 characters and less than 5 characters.
                            </span>
                        </span>
                    </div>
                </div>
                <div class="form-group" formGroupName="emailGroup"
                    [ngClass]="{'has-error': customerForm.get('emailGroup').errors}">
                    <div class="col-md-10">
                    <label class='col-md-2 control-label'>Email</label>
                    <div class='col-md-8'>
                        <input class="form-control" formControlName="email" type="text">
                        <span class="help-block" *ngIf="(customerForm.get('emailGroup.email').touched || 
                                                            customerForm.get('emailGroup.email').dirty) && 
                                                            customerForm.get('emailGroup.email').errors">
                            <span *ngIf="customerForm.get('emailGroup.email').errors">{{emailMessage}}</span>
                            <!--<span *ngIf="customerForm.get('emailGroup.email').errors.required">
                                Please enter your Email.
                            </span> 
                            <span *ngIf="customerForm.get('emailGroup.email').errors.pattern">
                                Incorrect email address.
                            </span>-->
                        </span>
                    </div>  
                    </div>
                    <div class="col-md-10">             
                    <label class='col-md-2 control-label'>Confirm Email</label>
                    <div class='col-md-8'>
                        <input class="form-control" formControlName="confirmEmail" type="text">
                        <span class="help-block" *ngIf="(customerForm.get('emailGroup.confirmEmail').touched || 
                                                            customerForm.get('emailGroup.confirmEmail').dirty) && 
                                                            (customerForm.get('emailGroup.confirmEmail').errors || 
                                                            customerForm.get('emailGroup').errors)">
                            <span *ngIf="customerForm.get('emailGroup').errors || 
                                        customerForm.get('emailGroup.confirmEmail').errors">{{emailConfirmMessage}}</span>
                            <!--<span *ngIf="customerForm.get('emailGroup.confirmEmail').errors?.required">
                                Please confirm your email address.  
                            </span>  
                            <span *ngIf="customerForm.get('emailGroup.confirmEmail').errors?.mismatch">
                                Emails don't match.s
                            </span>-->
                        </span>
                    </div>
                    </div>
                </div>
                <div class="form-group" 
                    [ngClass]="{'has-error': (customerForm.get('phone').touched || 
                                                customerForm.get('phone').dirty) && !customerForm.get('phone').valid}">
                    <label class='col-md-2 control-label'>phone</label>
                    <div class='col-md-8'>
                        <input class="form-control" formControlName="phone" type="text" placeholder="phone">
                        <span class="help-block" *ngIf="customerForm.get('phone').errors">
                            <span *ngIf="customerForm.get('phone').errors.required">
                                Please enter your Phone.
                            </span>                            
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label class='col-md-2 control-label'>Send Notification</label>
                    <div class='col-md-8'>
                        <label class="radio-inline">
                            <input type="radio" value="email" formControlName="notification">Email
                        </label>
                        <label class="radio-inline">
                            <input type="radio" value="text" formControlName="notification">Text
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-1 col-md-8 checkbox">
                        <label class='col-md-3'>Send Catalog</label>                  
                        <input formControlName="sendCatalog" type="checkbox">  
                    </div>                
                </div> 
                <div class="form-group" [ngClass]="{'has-error': (customerForm.get('rating').touched 
                                            || customerForm.get('rating').dirty) && !customerForm.get('rating').valid}">
                    <label class="col-md-2 control-label" for="ratingId">Rating</label>
                    <div class="col-md-8">
                        <input class="form-control" id="ratingId" type="number" formControlName="rating"/>
                        <span class="help-block" *ngIf="(customerForm.get('rating').touched || customerForm.get('rating').dirty) && customerForm.get('rating').errors">
                            <span *ngIf="customerForm.get('rating').errors.range">
                                Please rate your experience from 1 to 5.
                            </span>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-4 col-md-offset-2">
                        <span>
                            <button class="btn btn-primary" type="submit" [disabled]="!customerForm.valid">Save</button>
                        </span>
                        <span>
                            <button class="btn btn-primary" type="button" (click)="populateTestData('set')">Test Data</button>
                        </span>
                        <span>
                            <button class="btn btn-primary" type="button" (click)="populateTestData('patch')">Patch Data</button>
                        </span>
                    </div>
                </div>
            </fieldset>
        </form>    
    </div>   
</div>
<br> Dirty: {{customerForm.dirty}}
<br> Touched: {{customerForm.touched}}
<br> Phone touched: {{customerForm.get('phone').touched}}
<br> Confirm Email Touched: {{customerForm.get('emailGroup.confirmEmail').touched}}
<br> Confirm Email Dirty: {{customerForm.get('emailGroup.confirmEmail').dirty}}
<br> Confirm Email Errors: {{customerForm.get('emailGroup.email').errors}}
<br> Confirm Email mismatch: {{customerForm.get('emailGroup.confirmEmail').errors?.mismatch}}